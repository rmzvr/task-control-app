<div class="login">
  <ng-container
    *ngIf="isLoginForm; then loginFormTemplate; else registerFormTemplate"
  ></ng-container>
</div>

<ng-template #loginFormTemplate>
  <form class="form" [formGroup]="loginForm" (submit)="login($event)">
    <div class="form__header">
      <h2 class="form__title">Login</h2>
    </div>
    <ul class="form__body">
      <li class="form__item">
        <label class="form__item-label" for="username">Username</label>
        <input
          class="form__item-input"
          id="username"
          type="text"
          formControlName="username"
        />
        <label
          class="form__error-label"
          for="username"
          *ngIf="username?.errors?.['required'] && username?.touched"
          >Field is required</label
        >
        <label
          class="form__error-label"
          for="username"
          *ngIf="username?.errors?.['minlength'] && username?.touched"
          >Field must be at least 6 characters</label
        >
      </li>
      <li class="form__item">
        <label class="form__item-label" for="password">Password</label>
        <input
          class="form__item-input"
          id="password"
          type="password"
          formControlName="password"
        />
        <label
          class="form__error-label"
          for="username"
          *ngIf="password?.errors?.['required'] && password?.touched"
          >Field is required</label
        >
        <label
          class="form__error-label"
          for="username"
          *ngIf="password?.errors?.['minlength'] && password?.touched"
          >Field must be at least 6 characters</label
        >
      </li>
      <li class="form__item">
        <ul class="form__buttons">
          <li>
            <button
              class="form__button"
              type="submit"
              [disabled]="loginForm.status === 'INVALID'"
            >
              Login
            </button>
          </li>

          <li>
            <button
              class="form__button form__button--type--simple"
              type="submit"
              (click)="toggleForms()"
            >
              Register
            </button>
          </li>
        </ul>
      </li>
    </ul>
  </form>
</ng-template>

<ng-template #registerFormTemplate>
  <form class="form" [formGroup]="loginForm" (submit)="register($event)">
    <div class="form__header">
      <h2 class="form__title">Register</h2>
    </div>
    <ul class="form__body">
      <li class="form__item">
        <label class="form__item-label" for="username">Username</label>
        <input
          class="form__item-input"
          id="username"
          type="text"
          formControlName="username"
        />
        <label
          class="form__error-label"
          for="username"
          *ngIf="username?.errors?.['required'] && username?.touched"
          >Field is required</label
        >
        <label
          class="form__error-label"
          for="username"
          *ngIf="username?.errors?.['minlength'] && username?.touched"
          >Field must be at least 6 characters</label
        >
      </li>
      <li class="form__item">
        <label class="form__item-label" for="password">Password</label>
        <input
          class="form__item-input"
          id="password"
          type="password"
          formControlName="password"
        />
        <label
          class="form__error-label"
          for="username"
          *ngIf="password?.errors?.['required'] && password?.touched"
          >Field is required</label
        >
        <label
          class="form__error-label"
          for="username"
          *ngIf="password?.errors?.['minlength'] && password?.touched"
          >Field must be at least 6 characters</label
        >
      </li>
      <li class="form__item">
        <ul class="form__buttons">
          <li>
            <button
              class="form__button"
              type="submit"
              [disabled]="loginForm.status === 'INVALID'"
            >
              Register
            </button>
          </li>

          <li>
            <button
              class="form__button form__button--type--simple"
              type="button"
              (click)="toggleForms()"
            >
              Cancel
            </button>
          </li>
        </ul>
      </li>
    </ul>
  </form>
</ng-template>

<div class="snackbar" [class.visible]="isSnackVisible" [attr.data-type]="type">
  <span class="snackbar__message">{{ message }}</span>

  <svg
    class="snackbar__button-close"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 94.926 94.926"
    (click)="showSnackbar()"
  >
    <g>
      <path
        d="M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0
		c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096
		c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476
		c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62
		s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z"
      />
    </g>
  </svg>
</div>
