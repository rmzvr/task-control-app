<li
  class="task-item"
  droppable
  (dragStart)="setCurrentTask()"
  (click)="openTask()"
  hover
>
  <div class="task-item__header">
    <span class="task-item__name">{{ task.name }}</span>
    <button
      class="task-item__button-edit"
      type="button"
      (click)="openTaskMenu($event)"
      hover
    >
      <svg
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        enable-background="new 0 0 512 512"
      >
        <g>
          <g>
            <g>
              <path
                d="m453.7,133l-286,289.6-71.6-75 284.8-288.4c9-9.1 24.8-9 33.7,0.1l39.2,40.3c9,9.2 8.9,24.2-0.1,33.4zm-375.7,254.4l49.1,51.5-66.9,14.5 17.8-66zm404.8-316.3l-39.2-40.3c-13.3-14.8-54.9-35.8-91.5-0.4l-298.7,302.5c-2.5,2.5-4.3,5.6-5.2,9l-36,133.1c-4.6,17 4.2,27.5 19.6,25.7 1.4-0.2 140.9-30.1 140.9-30.1 3.8-0.8 7.3-2.8 10.1-5.6l299.6-303.4c24.6-24.8 24.8-65.4 0.4-90.5z"
              />
            </g>
          </g>
        </g>
      </svg>
    </button>
  </div>

  <div class="task-item__body">
    <svg
      class="task-item__icon-description"
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      viewBox="0 0 16 16"
      *ngIf="task.description"
    >
      <path
        fill-rule="evenodd"
        d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"
      />
    </svg>

    <ng-container
      *ngIf="comments$ | async | sortComments: task._id as comments"
    >
      <ng-container *ngIf="comments.length">
        <div class="task-item__chat-indicator">
          <svg
            class="task-item__chat-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"
            />
          </svg>
          <span class="task-item__chat-text">{{ comments.length }}</span>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <div class="task-item helper" *draggable-helper>
    <div class="task-item__header">
      <span>{{ task.name }}</span>
      <button class="task-item__button-edit" type="button">
        <svg
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          enable-background="new 0 0 512 512"
        >
          <g>
            <g>
              <g>
                <path
                  d="m453.7,133l-286,289.6-71.6-75 284.8-288.4c9-9.1 24.8-9 33.7,0.1l39.2,40.3c9,9.2 8.9,24.2-0.1,33.4zm-375.7,254.4l49.1,51.5-66.9,14.5 17.8-66zm404.8-316.3l-39.2-40.3c-13.3-14.8-54.9-35.8-91.5-0.4l-298.7,302.5c-2.5,2.5-4.3,5.6-5.2,9l-36,133.1c-4.6,17 4.2,27.5 19.6,25.7 1.4-0.2 140.9-30.1 140.9-30.1 3.8-0.8 7.3-2.8 10.1-5.6l299.6-303.4c24.6-24.8 24.8-65.4 0.4-90.5z"
                />
              </g>
            </g>
          </g>
        </svg>
      </button>
    </div>
  </div>
</li>
